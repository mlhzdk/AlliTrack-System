<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Quick Fix – IP Surveillance · AlliTrack</title>
    <!-- same font + icons, to feel familiar but clean PDF style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="/src/styles/shared/landing-style.css">
    <link rel="stylesheet" href="/src/styles/shared/quickfix-one.css">
    <script src="/src/scripts/landing-accessibility.js"></script>

</head>

<body>
    <div class="document-wrapper">
        <div class="back-home-wrapper">
            <a href="/index.html#home-section" class="back-home-link">
                <i class="fas fa-arrow-left"></i> Back to AlliTrack Home
            </a>
        </div>

        <div class="doc-title">
            <i class="fas fa-video"></i>
            <h1>IP Surveillance · Quick Fix</h1>
        </div>

        <!-- meta info -->
        <div class="doc-meta">
            <span><i class="fas fa-file-pdf"></i> TROUBLESHOOTING GUIDE v1.2</span>
            <span><i class="fas fa-camera"></i> AlliTrack intelligent support</span>
            <span><i class="fas fa-clock"></i> 3‑minute diagnosis</span>
        </div>

        <p style="font-size:1.05rem; margin-bottom:28px; color: var(--text-secondary);">
            This document contains field‑tested resolutions for the most common IP camera and recording issues.
        </p>

        <!-- camera health -->
        <div class="section-title">
            <i class="fas fa-heartbeat"></i> Camera health & connectivity
        </div>
        <div class="card-grid">
            <div class="fix-card">
                <div class="fix-icon"><i class="fas fa-wifi"></i></div>
                <h3>Camera offline / ping fails</h3>
                <p style="margin-bottom: 10px;">Check power & VLAN, then run:</p>
                <div
                    style="background: var(--gray-100); padding: 8px 12px; border-radius: 12px; font-family: monospace; font-size:0.8rem; overflow-x: auto;">
                    ping 192.168.1.120 -t
                </div>
                <ul style="margin-top: 16px; list-style: none; padding-left: 0;">
                    <li style="display: flex; gap: 8px; margin-bottom: 6px;"><span
                            style="color: var(--blue-500);">✓</span> <span>Verify PoE injector/switch LED</span></li>
                    <li style="display: flex; gap: 8px; margin-bottom: 6px;"><span
                            style="color: var(--blue-500);">✓</span> <span>ARP table: <span
                                style="font-family: monospace;">arp -a | findstr 1.120</span></span></li>
                </ul>
            </div>
            <div class="fix-card">
                <div class="fix-icon"><i class="fas fa-image"></i></div>
                <h3>Blurry / no image</h3>
                <p>Lens focus, IR cut filter stuck, or corrupted stream.</p>
                <div style="margin-top: 16px;">
                    <span class="badge"><i class="fas fa-bolt"></i> Quick fix</span>
                    <p style="margin-top: 10px;">Reboot camera via HTTP API: <span
                            style="font-family: monospace; word-break: break-all;">http://camera-ip/cgi-bin/reboot</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- recording verification -->
        <div class="section-title">
            <i class="fas fa-record-vinyl"></i> Recording verification
        </div>
        <div class="table-diag">
            <table>
                <tr>
                    <td style="font-weight:600; width: 30px;">1.</td>
                    <td style="font-weight:600;">Log into NVR / VMS</td>
                    <td>Check storage status → "overwrite" flag</td>
                </tr>
                <tr>
                    <td style="font-weight:600;">2.</td>
                    <td style="font-weight:600;">SMART disk health</td>
                    <td>Look for reallocated sectors (>10 = replace)</td>
                </tr>
                <tr>
                    <td style="font-weight:600;">3.</td>
                    <td style="font-weight:600;">Recording schedule</td>
                    <td>Continuous vs motion — verify time slices</td>
                </tr>
                <tr>
                    <td style="font-weight:600;">4.</td>
                    <td style="font-weight:600;">Remote playback test</td>
                    <td>Use rtsp://[user:pass@]ip/stream</td>
                </tr>
            </table>
        </div>
        <div class="code-block">
            <i class="fas fa-terminal" style="margin-right: 8px; color: var(--blue-500);"></i>
            RTSP validation: ffplay rtsp://admin:password@10.2.10.45:554/Streaming/Channels/101
        </div>

        <!-- motion alerts -->
        <div class="section-title">
            <i class="fas fa-bell"></i> Motion alerts & events
        </div>
        <ul class="step-list">
            <li><span class="step-num">1</span> <strong>Verify motion detection region</strong> – too small / inactive
                zones. Draw at least 10% of frame.</li>
            <li><span class="step-num">2</span> <strong>Sensitivity calibration</strong>: set to 70–80, avoid high noise
                (disable “digital noise reduction” temporarily).</li>
            <li><span class="step-num">3</span> <strong>Test push/email</strong>: use ‘manual trigger’ in camera web UI.
                If no alert, check SMTP / webhook.</li>
            <li><span class="step-num">4</span> <strong>Event hysteresis</strong> – set interval to min. 5 seconds to
                avoid flood.</li>
        </ul>

        <!-- advanced two col -->
        <div class="two-col-grid">
            <div style="background: var(--blue-50); padding: 20px; border-radius: 20px;">
                <i class="fas fa-microchip"
                    style="color: var(--blue-500); font-size: 1.6rem; margin-bottom: 10px; display: block;"></i>
                <h3 style="font-size: 1.2rem; margin-bottom: 8px;">Firmware mismatch</h3>
                <p style="font-size: 0.9rem; color: var(--text-secondary);">If camera shows “stream error” after update,
                    rollback or reflash via TFTP. Known issue: H.265+ incompatibility.</p>
            </div>
            <div
                style="background: var(--gray-50); padding: 20px; border-radius: 20px; border:1px solid var(--border-color);">
                <i class="fas fa-clock"
                    style="color: var(--blue-500); font-size: 1.6rem; margin-bottom: 10px; display: block;"></i>
                <h3 style="font-size: 1.2rem; margin-bottom: 8px;">Time sync drift</h3>
                <p style="font-size: 0.9rem; color: var(--text-secondary);">Recording timestamps offset > 5 min? Force
                    NTP sync: <span style="font-family: monospace;">pool.ntp.org</span>. Reboot after change.</p>
            </div>
        </div>

        <!-- 30 sec resolution -->
        <div style="margin: 32px 0 16px;">
            <span class="badge"><i class="fas fa-toolbox"></i> 30‑second resolution</span>
        </div>
        <div class="two-col-grid">
            <div class="tip-box">
                <h4><i class="fas fa-fan" style="color:var(--blue-500);"></i> Overheating</h4>
                <p style="color: var(--text-secondary);">IR LED thermal shutdown → disable IR for 10min, check housing
                    seal.</p>
            </div>
            <div class="tip-box">
                <h4><i class="fas fa-plug" style="color:var(--blue-500);"></i> PoE cycling</h4>
                <p style="color: var(--text-secondary);">Voltage drop > 1.5V? Use midspan or 802.3af/at injector.
                    Re-crimp.</p>
            </div>
        </div>

        <!-- error matrix -->
        <hr style="border: none; border-top: 1px solid var(--border-color); margin: 32px 0 24px;">
        <div style="margin-top: 24px;">
            <h3 style="font-weight: 600; font-size: 1.1rem; display: flex; gap: 8px; margin-bottom: 16px;">
                <i class="fas fa-table"></i> Error code matrix – IP surveillance
            </h3>
            <div style="overflow-x: auto;">
                <table class="error-matrix">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Indication</th>
                            <th>Quick fix</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="font-weight: 600;">401</td>
                            <td>Unauthorized – password expired</td>
                            <td>reset credentials / enable digest auth</td>
                        </tr>
                        <tr>
                            <td style="font-weight: 600;">503</td>
                            <td>Stream limit reached</td>
                            <td>reduce viewers; increase max-conn</td>
                        </tr>
                        <tr>
                            <td style="font-weight: 600;">NSV</td>
                            <td>No space volume</td>
                            <td>overwrite older footage / extend storage</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ---------- SUBMIT A TICKET BUTTON (Open ticket) – triggers modal then login ---------- -->
        <div class="open-ticket-section">
            <button class="btn-open-ticket" id="submitTicketBtn">
                <i class="fas fa-ticket-alt"></i> Still having trouble? Submit a ticket </button>
            <p style="font-size:0.8rem; color: var(--text-secondary); margin-top: 16px;">
                Submit a support ticket — we’ll help you further.
            </p>
        </div>

        <div class="footnote-pdf">
            <span><i class="fas fa-print"></i> print‑ready · AlliTrack intelligent ticketing · generated 2025</span>
        </div>
    </div>

    <!-- ======== MODAL: "How was the system?" appears when Open ticket is clicked ======== -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-card">
            <button class="close-modal-x" id="closeModalX" aria-label="Close modal">&times;</button>
            <div class="modal-icon">
                <i class="fas fa-headset"></i>
            </div>
            <h2>How was the system?</h2>
            <p>Your feedback helps us improve the<br>IP Surveillance Quick Fix.</p>

            <div class="rating-group">
                <button class="rating-btn" data-rating="good"><i class="fas fa-smile"></i> Good</button>
                <button class="rating-btn" data-rating="neutral"><i class="fas fa-meh"></i> Neutral</button>
                <button class="rating-btn" data-rating="bad"><i class="fas fa-frown"></i> Bad</button>
            </div>

            <div class="modal-actions">
                <button class="modal-btn modal-btn-primary" id="submitRating">Submit & continue</button>
                <button class="modal-btn modal-btn-secondary" id="closeModalBtn">Cancel</button>
            </div>
            <p style="font-size:0.75rem; color: var(--text-secondary); margin-top: 20px;">
                After submitting, you'll be redirected to login.
            </p>
        </div>
    </div>

    <!-- ========== ACCESSIBILITY JS + MODAL & LOGIN REDIRECT ========= -->
    <script>
        (function () {
            'use strict';

            // ---------- ACCESSIBILITY ENGINE – SYNCED WITH LANDING (alliTrack_) ----------
            const STORAGE_PREFIX = 'alliTrack_';
            let fontSizeLevel = 1;
            let highContrast = false;
            let focusHighlight = false;
            let theme = 'light';

            try {
                fontSizeLevel = JSON.parse(localStorage.getItem(STORAGE_PREFIX + 'fontSize') || '1');
                highContrast = JSON.parse(localStorage.getItem(STORAGE_PREFIX + 'highContrast') || 'false');
                focusHighlight = JSON.parse(localStorage.getItem(STORAGE_PREFIX + 'focusHighlight') || 'false');
                theme = localStorage.getItem(STORAGE_PREFIX + 'theme') || 'light';
            } catch (e) { }

            const FONT_VALUES = ['80%', '100%', '120%', '140%'];
            const FONT_NAMES = ['Small', 'Medium', 'Large', 'X-Large'];
            const body = document.body;

            function applyFontSize() {
                document.documentElement.style.fontSize = FONT_VALUES[fontSizeLevel];
                const lbl = document.getElementById('currentFontSize');
                if (lbl) lbl.textContent = FONT_NAMES[fontSizeLevel];
                localStorage.setItem(STORAGE_PREFIX + 'fontSize', JSON.stringify(fontSizeLevel));
            }

            function applyTheme() {
                body.classList.remove('dark-theme', 'light-theme');
                if (theme === 'dark') body.classList.add('dark-theme');
                else body.classList.add('light-theme');
                localStorage.setItem(STORAGE_PREFIX + 'theme', theme);
                document.querySelectorAll('.theme-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.theme === theme);
                });
            }

            function applyContrast() {
                body.classList.toggle('high-contrast', highContrast);
                localStorage.setItem(STORAGE_PREFIX + 'highContrast', JSON.stringify(highContrast));
                const btn = document.getElementById('toggleContrast');
                if (btn) {
                    btn.classList.toggle('active', highContrast);
                    btn.setAttribute('aria-pressed', highContrast);
                }
            }

            function applyFocus() {
                body.classList.toggle('focus-highlight', focusHighlight);
                localStorage.setItem(STORAGE_PREFIX + 'focusHighlight', JSON.stringify(focusHighlight));
                const btn = document.getElementById('toggleFocus');
                if (btn) {
                    btn.classList.toggle('active', focusHighlight);
                    btn.setAttribute('aria-pressed', focusHighlight);
                }
            }

            function setFontSize(level) { if (level >= 0 && level < FONT_VALUES.length) { fontSizeLevel = level; applyFontSize(); } }
            function setTheme(t) { theme = t; applyTheme(); }
            function setHighContrast(v) { highContrast = v; applyContrast(); }
            function setFocus(v) { focusHighlight = v; applyFocus(); }
            function resetAll() { setFontSize(1); setTheme('light'); setHighContrast(false); setFocus(false); }

            applyFontSize(); applyTheme(); applyContrast(); applyFocus();

            // ---------- EVENT LISTENERS (DOM ready) ----------
            document.addEventListener('DOMContentLoaded', function () {
                // accessibility panel
                const toggleBtn = document.getElementById('accessibilityToggle');
                const panel = document.getElementById('accessibilityPanel');
                const closeBtn = document.getElementById('closeAccessibility');
                if (toggleBtn && panel) {
                    toggleBtn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        panel.classList.toggle('open');
                        toggleBtn.setAttribute('aria-expanded', panel.classList.contains('open'));
                    });
                    if (closeBtn) {
                        closeBtn.addEventListener('click', function () {
                            panel.classList.remove('open');
                            toggleBtn.setAttribute('aria-expanded', 'false');
                        });
                    }
                    document.addEventListener('click', function (e) {
                        if (panel.classList.contains('open') && !panel.contains(e.target) && !toggleBtn.contains(e.target)) {
                            panel.classList.remove('open');
                            toggleBtn.setAttribute('aria-expanded', 'false');
                        }
                    });
                }

                // theme buttons
                document.querySelectorAll('.theme-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) { e.preventDefault(); setTheme(this.dataset.theme); });
                });

                document.getElementById('decreaseFont')?.addEventListener('click', function () { setFontSize(fontSizeLevel - 1); });
                document.getElementById('increaseFont')?.addEventListener('click', function () { setFontSize(fontSizeLevel + 1); });
                document.getElementById('toggleContrast')?.addEventListener('click', function () { setHighContrast(!highContrast); });
                document.getElementById('toggleFocus')?.addEventListener('click', function () { setFocus(!focusHighlight); });
                document.getElementById('resetAccessibility')?.addEventListener('click', resetAll);

                // ---------- MODAL CONTROLS: Open ticket → show modal → submit → redirect to login ----------
                const modal = document.getElementById('feedbackModal');
                const triggerBtn = document.getElementById('submitTicketBtn');  // "Open ticket" button
                const closeModalBtn = document.getElementById('closeModalBtn');
                const closeModalX = document.getElementById('closeModalX');
                const submitRating = document.getElementById('submitRating');

                function openModal() {
                    if (modal) modal.classList.add('active');
                }
                function closeModal() {
                    if (modal) modal.classList.remove('active');
                }

                // Open modal when "Open ticket" is clicked
                if (triggerBtn) {
                    triggerBtn.addEventListener('click', openModal);
                }

                // Close via Cancel / X
                if (closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
                if (closeModalX) closeModalX.addEventListener('click', closeModal);

                // Submit rating: capture rating, then redirect to LOGIN PAGE
                if (submitRating) {
                    submitRating.addEventListener('click', function () {
                        // (Optional) capture selected rating – but we just proceed to login
                        // You could store rating in localStorage or send analytics; here we simply redirect.
                        // For demonstration, we also show a brief message (redirecting...)
                        const selectedRating = document.querySelector('.rating-btn[style*="background: var(--blue-500)"]');
                        // We'll still close modal and redirect
                        closeModal();
                        // Redirect to login page (update with your actual login URL)
                        window.location.href = '#';  // Placeholder – CHANGE to real login page
                        // In real implementation, use: window.location.href = '/login' or '/landing/pages/login.html'
                        // For demo, we use an alert to simulate then redirect.
                        alert('Redirecting to login page (simulated). In production, replace window.location.href with actual login URL.');
                        // Uncomment the line below for actual redirect:
                        // window.location.href = '/login'; 
                    });
                }

                // rating button interaction (visual selection)
                document.querySelectorAll('.rating-btn').forEach(btn => {
                    btn.addEventListener('click', function () {
                        // remove selected style from all
                        document.querySelectorAll('.rating-btn').forEach(b => {
                            b.style.background = '';
                            b.style.color = '';
                            b.style.borderColor = '';
                            const icon = b.querySelector('i');
                            if (icon) icon.style.color = '';
                        });
                        // apply selected style
                        this.style.background = 'var(--blue-500)';
                        this.style.color = 'white';
                        this.style.borderColor = 'var(--blue-500)';
                        const icon = this.querySelector('i');
                        if (icon) icon.style.color = 'white';
                    });
                });

                // close modal when clicking overlay
                if (modal) {
                    modal.addEventListener('click', function (e) {
                        if (e.target === modal) closeModal();
                    });
                }

            }); // DOMContentLoaded

            // escape key for accessibility panel + modal
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    const panel = document.getElementById('accessibilityPanel');
                    const toggleBtn = document.getElementById('accessibilityToggle');
                    if (panel?.classList.contains('open')) {
                        panel.classList.remove('open');
                        if (toggleBtn) toggleBtn.setAttribute('aria-expanded', 'false');
                    }
                    const modal = document.getElementById('feedbackModal');
                    if (modal?.classList.contains('active')) {
                        modal.classList.remove('active');
                    }
                }
            });
        })();
    </script>
</body>

</html>